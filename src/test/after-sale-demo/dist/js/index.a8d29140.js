(()=>{"use strict";var e={457:(e,t,o)=>{o.r(t),o.d(t,{__esModule:()=>r.B,default:()=>u});var r=o(6170),n=o(9998);const a=(0,n.A)(r.A,[["__scopeId","data-v-0c1f665e"]]),u=a},1289:function(e,t,o){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.router=void 0;const n=o(8293),a=r(o(8072)),u=[{path:"/after-sale",component:a.default}];t.router=(0,n.createRouter)({history:(0,n.createWebHistory)(),routes:u})},2416:()=>{},2608:(e,t,o)=>{Object.defineProperty(t,"B",{value:!0});const r=o(9582),n=o(9582),a=o(9582);t.A=(0,r.defineComponent)({__name:"AfterSaleForm",emits:["submit"],setup(e,{emit:t}){const o=t,r=(0,a.reactive)({orderId:"",reason:"产品损坏"});function u(){o("submit",r)}return(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("form",{onSubmit:(0,n.withModifiers)(u,["prevent"])},[(0,n.createElementVNode)("div",null,[t[2]||(t[2]=(0,n.createElementVNode)("label",{for:"orderId"},"订单号",-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{id:"orderId","onUpdate:modelValue":t[0]||(t[0]=e=>r.orderId=e),required:""},null,512),[[n.vModelText,r.orderId]])]),(0,n.createElementVNode)("div",null,[t[4]||(t[4]=(0,n.createElementVNode)("label",{for:"reason"},"申请原因",-1)),(0,n.withDirectives)((0,n.createElementVNode)("select",{id:"reason","onUpdate:modelValue":t[1]||(t[1]=e=>r.reason=e),required:""},t[3]||(t[3]=[(0,n.createElementVNode)("option",{value:"产品损坏"},"产品损坏",-1),(0,n.createElementVNode)("option",{value:"不符合期望"},"不符合期望",-1),(0,n.createElementVNode)("option",{value:"其他"},"其他",-1)]),512),[[n.vModelSelect,r.reason]])]),t[5]||(t[5]=(0,n.createElementVNode)("button",{type:"submit"},"申请售后",-1))],32))}})},2745:(e,t,o)=>{o.r(t),o.d(t,{default:()=>n.a});var r=o(4082),n=o.n(r),a={};for(const u in r)"default"!==u&&(a[u]=()=>r[u]);o.d(t,a)},3115:(e,t,o)=>{o.r(t),o.d(t,{__esModule:()=>r.B,default:()=>u});var r=o(4486),n=o(9998);const a=(0,n.A)(r.A,[["__scopeId","data-v-39f6ea75"]]),u=a},4082:function(e,t,o){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=o(9582),a=o(9582),u={class:"dashboard"},l=o(9582),s=r(o(6079)),d=r(o(3115)),c=r(o(4378)),i=o(7041);t["default"]=(0,n.defineComponent)({__name:"AfterSaleDashboard",setup(e){const t=(0,l.ref)("idle"),o=(0,l.ref)(!1),r=(0,l.ref)(""),n=(0,l.ref)(!1),f=(0,l.ref)("");function m(e,t=!1){r.value=e,n.value=t,setTimeout(()=>{r.value=""},3e3)}async function p(e){try{t.value="submitting";const r=await(0,i.submitAfterSale)(e);r.success?(t.value="processing",f.value=e.orderId,o.value=!0,m(r.message)):(t.value="idle",m(r.message||"提交失败，请重试",!0))}catch(r){console.error("售后申请提交失败:",r),t.value="idle",m("系统错误，请稍后重试",!0)}}async function v(e){try{t.value="submitting_refund";const o={...e,orderId:f.value},r=await(0,i.submitRefundRequest)(o);r.success?(t.value="refund_submitted",m(r.message)):m(r.message||"退款申请失败，请重试",!0)}catch(o){console.error("退款申请提交失败:",o),m("系统错误，请稍后重试",!0)}}return(e,l)=>((0,a.openBlock)(),(0,a.createElementBlock)("div",u,[l[0]||(l[0]=(0,a.createElementVNode)("h1",null,"售后中心",-1)),(0,a.createVNode)(s.default,{onSubmit:p}),o.value?((0,a.openBlock)(),(0,a.createBlock)(d.default,{key:0,onSubmit:v})):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(c.default,{status:t.value},null,8,["status"]),r.value?((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:1,class:(0,a.normalizeClass)(["response-message",{error:n.value}])},(0,a.toDisplayString)(r.value),3)):(0,a.createCommentVNode)("",!0)]))}})},4378:(e,t,o)=>{o.r(t),o.d(t,{default:()=>l});var r=o(5771),n={};for(const s in r)"default"!==s&&(n[s]=()=>r[s]);o.d(t,n);o(2416);var a=o(9998);const u=(0,a.A)(r["default"],[["__scopeId","data-v-244d5ea6"]]),l=u},4486:(e,t,o)=>{Object.defineProperty(t,"B",{value:!0});const r=o(9582),n=o(9582),a=o(9582);t.A=(0,r.defineComponent)({__name:"RefundRequestForm",emits:["submit"],setup(e,{emit:t}){const o=t,r=(0,a.reactive)({amount:0,method:"原路返回"});function u(){o("submit",r)}return(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("form",{onSubmit:(0,n.withModifiers)(u,["prevent"])},[t[5]||(t[5]=(0,n.createElementVNode)("h3",null,"退款申请",-1)),(0,n.createElementVNode)("div",null,[t[2]||(t[2]=(0,n.createElementVNode)("label",{for:"amount"},"退款金额",-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{id:"amount",type:"number","onUpdate:modelValue":t[0]||(t[0]=e=>r.amount=e),required:""},null,512),[[n.vModelText,r.amount,void 0,{number:!0}]])]),(0,n.createElementVNode)("div",null,[t[4]||(t[4]=(0,n.createElementVNode)("label",{for:"method"},"退款方式",-1)),(0,n.withDirectives)((0,n.createElementVNode)("select",{id:"method","onUpdate:modelValue":t[1]||(t[1]=e=>r.method=e),required:""},t[3]||(t[3]=[(0,n.createElementVNode)("option",{value:"原路返回"},"原路返回",-1),(0,n.createElementVNode)("option",{value:"退到余额"},"退到余额",-1)]),512),[[n.vModelSelect,r.method]])]),t[6]||(t[6]=(0,n.createElementVNode)("button",{type:"submit"},"提交退款申请",-1))],32))}})},4490:function(e,t,o){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=o(9582),a=r(o(5481)),u=o(1289),l=o(7329),s=(0,n.createApp)(a.default);s.use((0,l.createPinia)()),s.use(u.router),s.mount("#app")},5481:(e,t,o)=>{o.r(t),o.d(t,{default:()=>d});var r=o(6331);const n={id:"app"};function a(e,t,o,a,u,l){const s=(0,r.g2)("router-view");return(0,r.uX)(),(0,r.CE)("div",n,[(0,r.bF)(s)])}const u={name:"App"};var l=o(9998);const s=(0,l.A)(u,[["render",a]]),d=s},5771:(e,t,o)=>{o.r(t),o.d(t,{default:()=>n.a});var r=o(6524),n=o.n(r),a={};for(const u in r)"default"!==u&&(a[u]=()=>r[u]);o.d(t,a)},6079:(e,t,o)=>{o.r(t),o.d(t,{__esModule:()=>r.B,default:()=>u});var r=o(2608),n=o(9998);const a=(0,n.A)(r.A,[["__scopeId","data-v-56520a96"]]),u=a},6170:(e,t,o)=>{Object.defineProperty(t,"B",{value:!0});const r=o(9582),n=o(9582),a={key:0,class:"modal"},u=o(9582);t.A=(0,r.defineComponent)({__name:"ReturnPolicyModal",emits:["close"],setup(e,{emit:t}){const o=t,r=(0,u.ref)(!0);function l(){r.value=!1,o("close")}return(e,t)=>r.value?((0,n.openBlock)(),(0,n.createElementBlock)("div",a,[(0,n.createElementVNode)("div",{class:"modal-content"},[t[0]||(t[0]=(0,n.createElementVNode)("h2",null,"退货政策",-1)),t[1]||(t[1]=(0,n.createElementVNode)("p",null,"产品在 7 天内可退，需保持原包装。",-1)),t[2]||(t[2]=(0,n.createElementVNode)("p",null,"15天内可换货，需支付运费。",-1)),(0,n.createElementVNode)("button",{onClick:l},"我知道了")])])):(0,n.createCommentVNode)("",!0)}})},6524:function(e,t,o){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=o(9582),a=o(9582),u={class:"status-container"},l=o(9582),s=r(o(457));t["default"]=(0,n.defineComponent)({__name:"AfterSaleStatus",props:{status:{}},setup(e){const t=(0,l.ref)(!0);function o(){t.value=!1}const r=e,n=(0,l.computed)(()=>{switch(r.status){case"idle":return"请提交您的售后申请";case"submitting":return"正在提交您的售后申请...";case"processing":return"正在处理您的售后申请";case"submitting_refund":return"正在提交您的退款申请...";case"refund_submitted":return"退款申请已提交，请等待处理";case"refund_approved":return"退款已批准，资金将在1-3个工作日内到账";case"completed":return"售后服务已完成";default:return"未知状态"}}),d=(0,l.computed)(()=>{switch(r.status){case"idle":return"idle";case"submitting":case"submitting_refund":return"loading";case"processing":return"processing";case"refund_submitted":return"pending";case"refund_approved":case"completed":return"success";default:return""}});return(e,l)=>((0,a.openBlock)(),(0,a.createElementBlock)("div",u,[l[0]||(l[0]=(0,a.createElementVNode)("h3",null,"售后状态",-1)),(0,a.createElementVNode)("div",{class:(0,a.normalizeClass)(["status-box",d.value])},(0,a.toDisplayString)(n.value),3),"processing"===r.status&&t.value?((0,a.openBlock)(),(0,a.createBlock)(s.default,{key:0,onClose:o})):(0,a.createCommentVNode)("",!0)]))}})},7041:function(e,t,o){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.setMockEnabled=u,t.submitAfterSale=l,t.getAfterSaleStats=s,t.submitRefundRequest=d;const n=r(o(8669));let a=!0;function u(e){a=e}function l(e){return console.log("submitAfterSale",e),a?new Promise(t=>{setTimeout(()=>{t({success:!0,message:"售后申请提交成功",data:{orderId:e.orderId,status:"processing"}})},800)}):n.default.post("/api/after-sale/apply",e).then(e=>e.data)}function s(e){return console.log("getAfterSaleStats",e),a?new Promise(e=>{setTimeout(()=>{e({count:Math.floor(5*Math.random()),updatedAt:(new Date).toISOString()})},500)}):n.default.get(`/api/after-sale/stats?orderId=${e}`).then(e=>e.data)}function d(e){return console.log("submitRefundRequest",e),a?new Promise(t=>{setTimeout(()=>{t({success:!0,message:"退款申请提交成功",data:{refundId:"RF"+Date.now().toString().slice(-6),status:"refund_submitted",amount:e.amount,method:e.method}})},1e3)}):n.default.post("/api/after-sale/refund",e).then(e=>e.data)}},8072:(e,t,o)=>{o.r(t),o.d(t,{default:()=>u});var r=o(2745),n={};for(const l in r)"default"!==l&&(n[l]=()=>r[l]);o.d(t,n);o(8932);const a=r["default"],u=a},8932:()=>{}},t={};function o(r){var n=t[r];if(void 0!==n)return n.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,o),a.exports}o.m=e,(()=>{var e=[];o.O=(t,r,n,a)=>{if(!r){var u=1/0;for(c=0;c<e.length;c++){for(var[r,n,a]=e[c],l=!0,s=0;s<r.length;s++)(!1&a||u>=a)&&Object.keys(o.O).every(e=>o.O[e](r[s]))?r.splice(s--,1):(l=!1,a<u&&(u=a));if(l){e.splice(c--,1);var d=n();void 0!==d&&(t=d)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[r,n,a]}})(),(()=>{o.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;return o.d(t,{a:t}),t}})(),(()=>{o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}})(),(()=>{o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{o.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{var e={57:0};o.O.j=t=>0===e[t];var t=(t,r)=>{var n,a,[u,l,s]=r,d=0;if(u.some(t=>0!==e[t])){for(n in l)o.o(l,n)&&(o.m[n]=l[n]);if(s)var c=s(o)}for(t&&t(r);d<u.length;d++)a=u[d],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(c)},r=self["webpackChunkafter_sale_demo"]=self["webpackChunkafter_sale_demo"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=o.O(void 0,[504],()=>o(4490));r=o.O(r)})();
//# sourceMappingURL=index.a8d29140.js.map