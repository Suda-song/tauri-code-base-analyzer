# üìö XHS Code Research MCP ‰ΩøÁî®ÊâãÂÜå

## üéØ Êèí‰ª∂Ê¶ÇËø∞

XHS Code Research MCP ÊòØ‰∏Ä‰∏™Âü∫‰∫éÊ®°Âûã‰∏ä‰∏ãÊñáÂçèËÆÆÔºàMCPÔºâÁöÑÊô∫ËÉΩ‰ª£Á†ÅÁ†îÁ©∂Êèí‰ª∂Ôºå‰∏ì‰∏∫Â∞èÁ∫¢‰π¶ÂºÄÂèëÂõ¢ÈòüËÆæËÆ°„ÄÇÂÆÉËÉΩÂ§üÂàÜÊûê‰ª£Á†ÅÂÆû‰ΩìÂπ∂ÁîüÊàêÈ´òË¥®ÈáèÁöÑ‰ª£Á†ÅÂª∫ËÆÆÔºåÊîØÊåÅÂ§öËΩÆÂØπËØùÂíå‰∫§‰∫íÂºèÂÆû‰ΩìÈÄâÊã©ÔºåËÆ©‰ª£Á†ÅÁîüÊàêÊõ¥Âä†Á≤æÂáÜÂíåÈ´òÊïà„ÄÇ

### üåü Ê†∏ÂøÉ‰ª∑ÂÄº

- **Êô∫ËÉΩÂÆû‰ΩìÂàÜÊûê**ÔºöÂü∫‰∫éËØ≠‰πâÊêúÁ¥¢ÊâæÂà∞ÊúÄÁõ∏ÂÖ≥ÁöÑ‰ª£Á†ÅÁªÑ‰ª∂
- **Â§öËΩÆÂØπËØùÊîØÊåÅ**ÔºöÊîØÊåÅ‰∫§‰∫íÂºèÁöÑÂÆû‰ΩìÈÄâÊã©ÂíåÁ°ÆËÆ§ÊµÅÁ®ã  
- **ÂÖ≥Á≥ªÊ∑±Â∫¶ÂàÜÊûê**ÔºöÂàÜÊûêÂÆû‰ΩìÈó¥ÁöÑÂØºÂÖ•„ÄÅË∞ÉÁî®„ÄÅÊ®°ÊùøÂíåÁõ∏‰ººÂÖ≥Á≥ª
- **Á≤æÁ°Æ‰∏ä‰∏ãÊñáÊéßÂà∂**ÔºöÁî®Êà∑ÂèØ‰ª•Á≤æÁ°ÆÊéßÂà∂Âì™‰∫õÂÆû‰ΩìÂèÇ‰∏é‰ª£Á†ÅÁîüÊàê
- **Â§öÁßçÂ∑•‰ΩúÊ®°Âºè**Ôºö‰ªéÂÆåÂÖ®Ëá™Âä®Âà∞Á≤æÁ°ÆÊâãÂä®ÁöÑÂ§öÁßç‰ΩøÁî®Ê®°Âºè

## üì¶ ÂÆâË£Ö‰∏éÈÖçÁΩÆ

### ÂâçÁΩÆÊù°‰ª∂

1. **ÂÆû‰ΩìÊï∞ÊçÆÊñá‰ª∂**ÔºöÈ°πÁõÆÊ†πÁõÆÂΩïÈúÄË¶ÅÂ≠òÂú® `entities.enriched.json` Êñá‰ª∂
   - ËØ•Êñá‰ª∂Áî± `@xhs/modular-code-analysis-agent` ÁîüÊàê
   - ÂåÖÂê´Â∑≤Ëß£ÊûêÂíå‰∏∞ÂØåÁöÑ‰ª£Á†ÅÂÆû‰Ωì‰ø°ÊÅØ

2. **ÁîüÊàêÂÆû‰ΩìÊñá‰ª∂**Ôºö
   ```bash
   # 1. ÊèêÂèñ‰ª£Á†ÅÂÆû‰Ωì
   pnpm run parser-agent extract --path=./src --out=entities.json
   
   # 2. ‰∏∞ÂØåÂÆû‰Ωì‰ø°ÊÅØ  
   pnpm run enrichment-agent --input=entities.json --output=entities.enriched.json
   ```

### ÂÆâË£ÖÊèí‰ª∂

```bash
npm install -g @xhs/code-research-mcp
```

### Cursor ÈÖçÁΩÆ

Âú®È°πÁõÆÊ†πÁõÆÂΩïÂàõÂª∫ `.cursor/mcp.json` ÈÖçÁΩÆÊñá‰ª∂Ôºö

```json
{
  "mcpServers": {
    "xhs-code-research": {
      "command": "npx",
      "args": ["-y", "@xhs/code-research-mcp"],
      "env": {
        "CURSOR_WORKSPACE_PATH": "${workspaceFolder}",
        "RAG_TOOL_DEBUG": "true"
      }
    }
  }
}
```

**ÈÖçÁΩÆËØ¥Êòé**Ôºö
- `CURSOR_WORKSPACE_PATH`ÔºöËá™Âä®ËÆæÁΩÆ‰∏∫ÂΩìÂâçÂ∑•‰ΩúÂå∫Ë∑ØÂæÑ
- `RAG_TOOL_DEBUG`ÔºöÂêØÁî®ËØ¶ÁªÜÊó•ÂøóËÆ∞ÂΩïÔºàÂèØÈÄâÔºâ

## üîß Ê†∏ÂøÉÂ∑•ÂÖ∑ËØ¶Ëß£

Êèí‰ª∂Êèê‰æõ 5 ‰∏™Ê†∏ÂøÉÂ∑•ÂÖ∑ÔºåÊØè‰∏™Â∑•ÂÖ∑ÈíàÂØπ‰∏çÂêåÁöÑ‰ΩøÁî®Âú∫ÊôØÔºö

### 1. üéØ start-analysisÔºöÊô∫ËÉΩÈúÄÊ±ÇÂàÜÊûê

**ÂäüËÉΩ**ÔºöÂàÜÊûê‰∏öÂä°ÈúÄÊ±ÇÔºåÊô∫ËÉΩÊé®ËçêÊúÄÁõ∏ÂÖ≥ÁöÑ 5 ‰∏™Ê†∏ÂøÉ‰ª£Á†ÅÁªÑ‰ª∂

**ÂèÇÊï∞**Ôºö
- `input` (ÂøÖÈúÄ)ÔºöËØ¶ÁªÜÁöÑ‰∏öÂä°ÈúÄÊ±ÇÊèèËø∞
- `sessionId` (ÂèØÈÄâ)Ôºö‰ºöËØùÊ†áËØÜÁ¨¶ÔºåÁî®‰∫éÂ§öËΩÆÂØπËØù

**‰ΩøÁî®Á§∫‰æã**Ôºö
```
start-analysis
input: "ÊàëÈúÄË¶ÅÂÆûÁé∞Áî®Êà∑ÁôªÂΩïÂäüËÉΩÔºåÂåÖÊã¨Ë¥¶Âè∑ÂØÜÁ†ÅÈ™åËØÅ„ÄÅËÆ∞‰ΩèÁôªÂΩïÁä∂ÊÄÅ„ÄÅÁôªÂΩïÂ§±Ë¥•ÊèêÁ§∫"
```

**ËæìÂá∫Á§∫‰æã**Ôºö
```markdown
# üéØ ÈúÄÊ±ÇÂàÜÊûêÂÆåÊàê

## üìù ÈúÄÊ±ÇÊèèËø∞
**ÊÇ®ÁöÑÈúÄÊ±Ç**: ÊàëÈúÄË¶ÅÂÆûÁé∞Áî®Êà∑ÁôªÂΩïÂäüËÉΩÔºåÂåÖÊã¨Ë¥¶Âè∑ÂØÜÁ†ÅÈ™åËØÅ„ÄÅËÆ∞‰ΩèÁôªÂΩïÁä∂ÊÄÅ„ÄÅÁôªÂΩïÂ§±Ë¥•ÊèêÁ§∫
**ÂàÜÊûêËÄóÊó∂**: 0.45Áßí
**‰ºöËØùID**: 1703123456789

## üèÜ Êé®ËçêÁöÑ5‰∏™Ê†∏ÂøÉÁªÑ‰ª∂

### 1. Component:LoginForm üëë *ÈªòËÆ§Êé®Ëçê*
- üìÅ **Êñá‰ª∂**: src/components/auth/LoginForm.vue
- üè∑Ô∏è **Á±ªÂûã**: component
- üìä **Áõ∏ÂÖ≥Â∫¶**: 9.2
- üìÑ **ÊëòË¶Å**: Áî®Êà∑ÁôªÂΩïË°®ÂçïÁªÑ‰ª∂ÔºåÊîØÊåÅË¥¶Âè∑ÂØÜÁ†ÅÈ™åËØÅ

### 2. API:AuthService
- üìÅ **Êñá‰ª∂**: src/services/AuthService.ts
- üè∑Ô∏è **Á±ªÂûã**: service
- üìä **Áõ∏ÂÖ≥Â∫¶**: 8.8
- üìÑ **ÊëòË¶Å**: Áî®Êà∑ËÆ§ËØÅÁõ∏ÂÖ≥APIÊúçÂä°

### 3. Hook:useAuth
- üìÅ **Êñá‰ª∂**: src/hooks/useAuth.ts
- üè∑Ô∏è **Á±ªÂûã**: composable
- üìä **Áõ∏ÂÖ≥Â∫¶**: 8.5
- üìÑ **ÊëòË¶Å**: Áî®Êà∑ËÆ§ËØÅÁä∂ÊÄÅÁÆ°ÁêÜhook

### 4. Store:AuthStore
- üìÅ **Êñá‰ª∂**: src/stores/auth.ts
- üè∑Ô∏è **Á±ªÂûã**: store
- üìä **Áõ∏ÂÖ≥Â∫¶**: 8.1
- üìÑ **ÊëòË¶Å**: Áî®Êà∑ËÆ§ËØÅÁä∂ÊÄÅÂ≠òÂÇ®

### 5. Util:TokenManager
- üìÅ **Êñá‰ª∂**: src/utils/token.ts
- üè∑Ô∏è **Á±ªÂûã**: utility
- üìä **Áõ∏ÂÖ≥Â∫¶**: 7.9
- üìÑ **ÊëòË¶Å**: TokenÁÆ°ÁêÜÂ∑•ÂÖ∑Á±ª
```

### 2. üöÄ select-core-componentÔºöÊô∫ËÉΩÂÖ≥ËÅîÊ®°Âºè

**ÂäüËÉΩ**ÔºöÈÄâÊã©Ê†∏ÂøÉÁªÑ‰ª∂Âπ∂AIÊô∫ËÉΩÂÖ≥ËÅîÁõ∏ÂÖ≥ÂÆû‰Ωì

**ÂèÇÊï∞**Ôºö
- `sessionId` (ÂøÖÈúÄ)Ôºö‰ºöËØùÊ†áËØÜÁ¨¶
- `componentId` (ÂèØÈÄâ)ÔºöË¶ÅÈÄâÊã©ÁöÑÊ†∏ÂøÉÁªÑ‰ª∂ID
- `maxRelated` (ÂèØÈÄâ)ÔºöÊúÄÂ§ßÂÖ≥ËÅîÂÆû‰ΩìÊï∞ÈáèÔºåÈªòËÆ§‰∏∫1

**‰ΩøÁî®Á§∫‰æã**Ôºö
```
select-core-component
sessionId: "1703123456789"
componentId: "Component:LoginForm"
maxRelated: 2
```

**ËæìÂá∫ÁâπÁÇπ**Ôºö
- Ëá™Âä®ÂàÜÊûêÁªÑ‰ª∂ÁöÑÂØºÂÖ•„ÄÅË∞ÉÁî®„ÄÅÊ®°ÊùøÂíåÁõ∏‰ººÂÖ≥Á≥ª
- AIÊô∫ËÉΩÁ≠õÈÄâÊúÄÁõ∏ÂÖ≥ÁöÑÂÆû‰Ωì
- Êèê‰æõÁ≠õÈÄâÁêÜÁî±ÂíåÊé®ËçêÂª∫ËÆÆ

### 3. üîß modify-entity-selectionÔºöÊâãÂä®ÈÄâÊã©Ê®°Âºè

**ÂäüËÉΩ**ÔºöÁ≤æÁ°ÆÊéßÂà∂ÂÆû‰ΩìÈÄâÊã©ÔºåÊîØÊåÅÊ∑ªÂä†„ÄÅÁßªÈô§„ÄÅÊõøÊç¢Á≠âÊìç‰Ωú

**ÂèÇÊï∞**Ôºö
- `sessionId` (ÂøÖÈúÄ)Ôºö‰ºöËØùÊ†áËØÜÁ¨¶
- `action` (ÂøÖÈúÄ)ÔºöÊìç‰ΩúÁ±ªÂûã
  - `add`ÔºöÊ∑ªÂä†ÂÆû‰Ωì
  - `remove`ÔºöÁßªÈô§ÂÆû‰Ωì  
  - `replace`ÔºöÊõøÊç¢ÂÖ®ÈÉ®ÂÆû‰ΩìÔºàÂàùÂßãÂåñÊâãÂä®Ê®°ÂºèÔºâ
  - `clear`ÔºöÊ∏ÖÁ©∫ÈÄâÊã©‰øùÁïôÊ†∏ÂøÉÁªÑ‰ª∂
- `entityIds` (ÂèØÈÄâ)ÔºöÂÆû‰ΩìIDÂàóË°®ÔºåÈÄóÂè∑ÂàÜÈöî
- `maxRelated` (ÂèØÈÄâ)ÔºöËé∑ÂèñÁõ∏ÂÖ≥ÂÆû‰ΩìÁöÑÊúÄÂ§ßÊï∞Èáè

**‰ΩøÁî®Á§∫‰æã**Ôºö

**ÂàùÂßãÂåñÊâãÂä®ÈÄâÊã©Ê®°Âºè**Ôºö
```
modify-entity-selection
sessionId: "1703123456789"
action: "replace"
entityIds: "Component:LoginForm"
maxRelated: 3
```

**Ê∑ªÂä†Áõ∏ÂÖ≥ÂÆû‰Ωì**Ôºö
```
modify-entity-selection
sessionId: "1703123456789" 
action: "add"
entityIds: "API:AuthService,Hook:useAuth"
```

**ÁßªÈô§‰∏çÈúÄË¶ÅÁöÑÂÆû‰Ωì**Ôºö
```
modify-entity-selection
sessionId: "1703123456789"
action: "remove"
entityIds: "Util:TokenManager"
```

**ËæìÂá∫ÁâπÁÇπ**Ôºö
- Â±ïÁ§∫ÂΩìÂâçÂ∑≤ÈÄâÊã©ÁöÑÂÆû‰ΩìÂàóË°®
- ÊòæÁ§∫ÂèØÊ∑ªÂä†ÁöÑÁõ∏ÂÖ≥ÂÆû‰ΩìÔºàÊåâÂÖ≥Á≥ªÁ±ªÂûãÂàÜÁªÑÔºâ
- Êèê‰æõ‰∏∞ÂØåÁöÑÊìç‰ΩúÊåáÂçó

### 4. üìù generate-code-promptÔºö‰ª£Á†ÅÊèêÁ§∫ËØçÁîüÊàê

**ÂäüËÉΩ**ÔºöÂü∫‰∫éÈÄâÂÆöÁöÑÂÆû‰ΩìÂàóË°®ÂíåÁî®Êà∑ÈúÄÊ±ÇÔºåÁîüÊàêÂÆåÊï¥ÁöÑ‰ª£Á†ÅÂÆûÁé∞ÊèêÁ§∫ËØç

**ÂèÇÊï∞**Ôºö
- `sessionId` (ÂøÖÈúÄ)Ôºö‰ºöËØùÊ†áËØÜÁ¨¶
- `componentId` (ÂèØÈÄâ)ÔºöÁõ¥Êé•ÊåáÂÆöÊ†∏ÂøÉÁªÑ‰ª∂
- `additionalContext` (ÂèØÈÄâ)ÔºöÈ¢ùÂ§ñÁöÑ‰∏ä‰∏ãÊñá‰ø°ÊÅØ

**‰ΩøÁî®Á§∫‰æã**Ôºö
```
generate-code-prompt
sessionId: "1703123456789"
additionalContext: "ÈúÄË¶ÅÂÖºÂÆπÁßªÂä®Á´ØÔºå‰ΩøÁî®TypeScript"
```

**ËæìÂá∫ÁâπÁÇπ**Ôºö
- ÁîüÊàêÂåÖÂê´ÂÆåÊï¥‰ª£Á†Å‰∏ä‰∏ãÊñáÁöÑÊèêÁ§∫ËØç
- ÂåÖÂê´ÊâÄÊúâÁõ∏ÂÖ≥ÂÆû‰ΩìÁöÑ‰ª£Á†ÅÁâáÊÆµ
- ÊîØÊåÅËá™ÂÆö‰πâ‰∏ä‰∏ãÊñáË¶ÅÊ±Ç

### 5. ‚ö° quick-analysisÔºö‰∏ÄÈîÆÂàÜÊûê

**ÂäüËÉΩ**ÔºöË∑≥Ëøá‰∫§‰∫íÁéØËäÇÔºåËæìÂÖ•ÈúÄÊ±ÇÁõ¥Êé•Ëé∑Âæó‰ª£Á†ÅÊèêÁ§∫ËØç

**ÂèÇÊï∞**Ôºö
- `input` (ÂøÖÈúÄ)Ôºö‰∏öÂä°ÈúÄÊ±ÇÊèèËø∞
- `componentIndex` (ÂèØÈÄâ)ÔºöÈÄâÊã©Á¨¨Âá†‰∏™Êé®ËçêÁªÑ‰ª∂ÔºåÈªòËÆ§‰∏∫0
- `includeRelated` (ÂèØÈÄâ)ÔºöÊòØÂê¶ÂåÖÂê´Áõ∏ÂÖ≥ÂÆû‰ΩìÔºåÈªòËÆ§‰∏∫true
- `maxRelated` (ÂèØÈÄâ)ÔºöÊúÄÂ§ßÂÖ≥ËÅîÂÆû‰ΩìÊï∞Èáè
- `additionalContext` (ÂèØÈÄâ)ÔºöÈ¢ùÂ§ñ‰∏ä‰∏ãÊñá‰ø°ÊÅØ

**‰ΩøÁî®Á§∫‰æã**Ôºö
```
quick-analysis
input: "ÊàëÈúÄË¶ÅÂÆûÁé∞Áî®Êà∑ÁôªÂΩïÂäüËÉΩ"
componentIndex: 0
includeRelated: true
maxRelated: 2
additionalContext: "‰ΩøÁî®Vue3 + TypeScript"
```

**ÈÄÇÁî®Âú∫ÊôØ**Ôºö
- Âø´ÈÄüÂºÄÂèëÈúÄÊ±Ç
- ÂØπÂàÜÊûêÁªìÊûúÊúâ‰ø°ÂøÉÁöÑÊÉÖÂÜµ
- ‰∏çÈúÄË¶ÅÁ≤æÁ°ÆÊéßÂà∂ÂÆû‰ΩìÈÄâÊã©

## üìä Á≥ªÁªüÊû∂ÊûÑ‰∏éÊµÅÁ®ãÂõæ

### üèóÔ∏è Êï¥‰ΩìÊû∂ÊûÑÂõæ

```mermaid
graph TB
    subgraph "Cursor Editor"
        U[Áî®Êà∑]
        C[Cursor MCP Client]
    end
    
    subgraph "XHS Code Research MCP"
        MS[MCP Server]
        TR[Tool Registry]
        
        subgraph "Core Handlers"
            SAH[StartAnalysisHandler]
            CCH[CoreComponentHandler] 
            MEH[ModifyEntityHandler]
            GPH[GeneratePromptHandler]
            QAH[QuickAnalysisHandler]
        end
        
        subgraph "Services & Utils"
            CS[ConversationService]
            EU[EntityUtils]
            PG[PromptGenerator]
            SL[SimpleLogger]
        end
    end
    
    subgraph "Data Layer"
        RT[RagInlineTool]
        EF[entities.enriched.json]
        AI[Anthropic AI]
    end
    
    U --> C
    C <--> MS
    MS --> TR
    TR --> SAH
    TR --> CCH
    TR --> MEH
    TR --> GPH
    TR --> QAH
    
    SAH --> CS
    CCH --> CS
    MEH --> CS
    GPH --> CS
    QAH --> CS
    
    SAH --> RT
    CCH --> RT
    MEH --> RT
    GPH --> RT
    QAH --> RT
    
    RT --> EF
    RT --> AI
    
    SAH --> EU
    CCH --> EU
    MEH --> EU
    GPH --> PG
    QAH --> PG
    
    SAH --> SL
    CCH --> SL
    MEH --> SL
    GPH --> SL
    QAH --> SL
    
    classDef userLayer fill:#e1f5fe
    classDef mcpLayer fill:#f3e5f5
    classDef dataLayer fill:#e8f5e8
    
    class U,C userLayer
    class MS,TR,SAH,CCH,MEH,GPH,QAH,CS,EU,PG,SL mcpLayer
    class RT,EF,AI dataLayer
```

### üîÑ Ê†∏ÂøÉÂ∑•‰ΩúÊµÅÁ®ãÂõæ

```mermaid
flowchart TD
    START([Áî®Êà∑ËæìÂÖ•ÈúÄÊ±Ç]) --> CHOOSE{ÈÄâÊã©Â∑•‰ΩúÊ®°Âºè}
    
    CHOOSE -->|ÂÆåÂÖ®Ëá™Âä®Âåñ| QA[quick-analysis]
    CHOOSE -->|Êô∫ËÉΩÂÖ≥ËÅî| SA[start-analysis]
    CHOOSE -->|Á≤æÁ°ÆÊâãÂä®| SA
    CHOOSE -->|Áõ¥Êé•Âá∫Á†Å| SA
    
    QA --> QA_SEARCH[Êô∫ËÉΩÊêúÁ¥¢ÂÆû‰Ωì]
    QA_SEARCH --> QA_SELECT[Ëá™Âä®ÈÄâÊã©Ê†∏ÂøÉÁªÑ‰ª∂]
    QA_SELECT --> QA_RELATE[Êô∫ËÉΩÂÖ≥ËÅîÁõ∏ÂÖ≥ÂÆû‰Ωì]
    QA_RELATE --> QA_GEN[ÁîüÊàê‰ª£Á†ÅÊèêÁ§∫ËØç]
    QA_GEN --> END([ÂÆåÊàê])
    
    SA --> SA_SEARCH[ÊêúÁ¥¢Êé®ËçêÁªÑ‰ª∂]
    SA_SEARCH --> SA_SHOW[Â±ïÁ§∫5‰∏™Ê†∏ÂøÉÁªÑ‰ª∂]
    SA_SHOW --> MODE_CHOOSE{Áî®Êà∑ÈÄâÊã©Ê®°Âºè}
    
    MODE_CHOOSE -->|Êô∫ËÉΩÂÖ≥ËÅî| CC[select-core-component]
    MODE_CHOOSE -->|ÊâãÂä®ÈÄâÊã©| ME[modify-entity-selection]
    MODE_CHOOSE -->|Áõ¥Êé•Âá∫Á†Å| GP[generate-code-prompt]
    
    CC --> CC_ANALYZE[ÂàÜÊûêÁªÑ‰ª∂ÂÖ≥Á≥ª]
    CC_ANALYZE --> CC_AI[AIÊô∫ËÉΩÁ≠õÈÄâÂÆû‰Ωì]
    CC_AI --> CC_RESULT[Â±ïÁ§∫Á≠õÈÄâÁªìÊûú]
    CC_RESULT --> GP
    
    ME --> ME_INIT[ÂàùÂßãÂåñÊâãÂä®Ê®°Âºè]
    ME_INIT --> ME_SHOW[Â±ïÁ§∫ÂèØÈÄâÂÆû‰Ωì]
    ME_SHOW --> ME_ACTION{Áî®Êà∑Êìç‰Ωú}
    ME_ACTION -->|Ê∑ªÂä†ÂÆû‰Ωì| ME_ADD[Ê∑ªÂä†ÈÄâÊã©]
    ME_ACTION -->|ÁßªÈô§ÂÆû‰Ωì| ME_REMOVE[ÁßªÈô§ÈÄâÊã©]
    ME_ACTION -->|Êª°ÊÑèÈÄâÊã©| GP
    ME_ADD --> ME_SHOW
    ME_REMOVE --> ME_SHOW
    
    GP --> GP_BUILD[ÊûÑÂª∫ÂÆåÊï¥‰∏ä‰∏ãÊñá]
    GP_BUILD --> GP_GENERATE[ÁîüÊàê‰ª£Á†ÅÊèêÁ§∫ËØç]
    GP_GENERATE --> END
    
    classDef startNode fill:#4caf50,color:#fff
    classDef processNode fill:#2196f3,color:#fff
    classDef decisionNode fill:#ff9800,color:#fff
    classDef endNode fill:#f44336,color:#fff
    
    class START,END startNode,endNode
    class QA_SEARCH,QA_SELECT,QA_RELATE,QA_GEN,SA_SEARCH,SA_SHOW,CC_ANALYZE,CC_AI,CC_RESULT,ME_INIT,ME_SHOW,ME_ADD,ME_REMOVE,GP_BUILD,GP_GENERATE processNode
    class CHOOSE,MODE_CHOOSE,ME_ACTION decisionNode
```

### ‚è±Ô∏è ÂÖ∏Âûã‰∫§‰∫íÊó∂Â∫èÂõæ

```mermaid
sequenceDiagram
    participant U as Áî®Êà∑
    participant C as Cursor
    participant M as MCP Server
    participant H as Handler
    participant R as RagTool
    participant AI as Anthropic AI
    participant CS as ConversationService
    participant L as SimpleLogger
    
    Note over U,L: Êô∫ËÉΩÂÖ≥ËÅîÊ®°ÂºèÂÖ∏Âûã‰∫§‰∫íÊµÅÁ®ã
    
    U->>C: ËæìÂÖ•ÈúÄÊ±ÇÊèèËø∞
    C->>M: start-analysis(input)
    M->>H: StartAnalysisHandler.handle()
    H->>L: ËÆ∞ÂΩïÂºÄÂßãÂàÜÊûêÊó•Âøó
    H->>R: ragTool.search(input, 5)
    R->>AI: ËØ≠‰πâÂàÜÊûêÈúÄÊ±Ç
    AI-->>R: ËøîÂõûÁõ∏ÂÖ≥ÊÄßËØÑÂàÜ
    R-->>H: ËøîÂõûÊé®ËçêÁöÑ5‰∏™ÁªÑ‰ª∂
    H->>CS: ‰øùÂ≠ò‰ºöËØùÁä∂ÊÄÅ
    H-->>M: ËøîÂõûÁªÑ‰ª∂ÂàóË°®
    M-->>C: ÊòæÁ§∫Êé®ËçêÁªÑ‰ª∂
    C-->>U: Â±ïÁ§∫ÂàÜÊûêÁªìÊûú
    
    Note over U,L: Áî®Êà∑ÈÄâÊã©Ê†∏ÂøÉÁªÑ‰ª∂
    
    U->>C: ÈÄâÊã©Ê†∏ÂøÉÁªÑ‰ª∂
    C->>M: select-core-component(sessionId, componentId)
    M->>H: CoreComponentHandler.handle()
    H->>CS: Ëé∑Âèñ‰ºöËØùÁä∂ÊÄÅ
    H->>L: ËÆ∞ÂΩïÁªÑ‰ª∂ÈÄâÊã©Êó•Âøó
    H->>R: ragTool.getRelatedEntities(componentId)
    R->>AI: AIÊô∫ËÉΩÁ≠õÈÄâÁõ∏ÂÖ≥ÂÆû‰Ωì
    AI-->>R: ËøîÂõûÁ≠õÈÄâÁªìÊûúÂíåÊé®ÁêÜ
    R-->>H: ËøîÂõûÁõ∏ÂÖ≥ÂÆû‰Ωì
    H->>L: ËÆ∞ÂΩïÁõ∏ÂÖ≥ÂÆû‰ΩìËé∑ÂèñÊó•Âøó
    H->>CS: Êõ¥Êñ∞‰ºöËØùÁä∂ÊÄÅ
    H-->>M: ËøîÂõûÊô∫ËÉΩÈÄâÊã©ÁªìÊûú
    M-->>C: ÊòæÁ§∫ÈÄâÊã©ÁªìÊûú
    C-->>U: Â±ïÁ§∫Êô∫ËÉΩÂÖ≥ËÅîÂÆû‰Ωì
    
    Note over U,L: ÁîüÊàê‰ª£Á†ÅÊèêÁ§∫ËØç
    
    U->>C: Á°ÆËÆ§ÁîüÊàê‰ª£Á†Å
    C->>M: generate-code-prompt(sessionId)
    M->>H: GeneratePromptHandler.handle()
    H->>CS: Ëé∑ÂèñÊúÄÁªàÂÆû‰ΩìÂàóË°®
    H->>L: ËÆ∞ÂΩï‰ª£Á†ÅÁîüÊàêÂºÄÂßã
    H->>H: ÊûÑÂª∫ÂÆåÊï¥‰∏ä‰∏ãÊñá
    H->>L: ËÆ∞ÂΩï‰ª£Á†ÅÁîüÊàêÂÆåÊàê
    H-->>M: ËøîÂõû‰ª£Á†ÅÊèêÁ§∫ËØç
    M-->>C: ËøîÂõûÁîüÊàêÁªìÊûú
    C-->>U: ÊòæÁ§∫ÂÆåÊï¥‰ª£Á†ÅÊèêÁ§∫ËØç
```

### üéØ ‰ºöËØùÁä∂ÊÄÅÁÆ°ÁêÜÂõæ

```mermaid
stateDiagram-v2
    [*] --> Initial: ÂêØÂä®MCPÊúçÂä°Âô®
    
    Initial --> Analyzing: start-analysis
    Analyzing --> CoreSelection: ÂàÜÊûêÂÆåÊàê
    
    CoreSelection --> SmartMode: select-core-component
    CoreSelection --> ManualMode: modify-entity-selection (replace)
    CoreSelection --> DirectCode: generate-code-prompt
    CoreSelection --> QuickMode: quick-analysis
    
    SmartMode --> ReadyGenerate: AIÊô∫ËÉΩÈÄâÊã©ÂÆåÊàê
    
    ManualMode --> ManualMode: add/remove/clear entities
    ManualMode --> ReadyGenerate: ÊâãÂä®ÈÄâÊã©ÂÆåÊàê
    
    ReadyGenerate --> CodeGenerated: generate-code-prompt
    
    DirectCode --> CodeGenerated: Áõ¥Êé•ÁîüÊàê‰ª£Á†Å
    QuickMode --> CodeGenerated: ‰∏ÄÈîÆÁîüÊàê‰ª£Á†Å
    
    CodeGenerated --> [*]: ‰ºöËØùÁªìÊùü
    
    note right of CoreSelection
        ‰ºöËØùÁä∂ÊÄÅÂåÖÂê´Ôºö
        - sessionId
        - userInput  
        - coreComponents
        - selectedEntities
        - step
    end note
    
    note right of ReadyGenerate
        ÊúÄÁªàÂÆû‰ΩìÂàóË°®Ôºö
        - Ê†∏ÂøÉÁªÑ‰ª∂
        - Áõ∏ÂÖ≥ÂÆû‰Ωì
        - Áî®Êà∑Ëá™ÂÆö‰πâÂÆû‰Ωì
    end note
```

### üìà ÊÄßËÉΩÁõëÊéßÊµÅÁ®ãÂõæ

```mermaid
flowchart LR
    subgraph "Êó•ÂøóËÆ∞ÂΩï"
        START_LOG[ÂºÄÂßãËÆ∞ÂΩï] --> ENTITY_LOG[ÂÆû‰ΩìÂä†ËΩΩÊó•Âøó]
        ENTITY_LOG --> SEARCH_LOG[ÊêúÁ¥¢ÊÄßËÉΩÊó•Âøó]
        SEARCH_LOG --> AI_LOG[AIË∞ÉÁî®Êó•Âøó]
        AI_LOG --> ERROR_LOG[ÈîôËØØÂ§ÑÁêÜÊó•Âøó]
    end
    
    subgraph "ÊÄßËÉΩÊåáÊ†á"
        LOAD_TIME[ÂÆû‰ΩìÂä†ËΩΩÊó∂Èó¥]
        SEARCH_TIME[ÊêúÁ¥¢ËÄóÊó∂]
        AI_TIME[AIÂàÜÊûêËÄóÊó∂]
        TOTAL_TIME[ÊÄªÂ§ÑÁêÜÊó∂Èó¥]
    end
    
    subgraph "ÁõëÊéßËæìÂá∫"
        CONSOLE[ÊéßÂà∂Âè∞ËæìÂá∫]
        FILE[Êó•ÂøóÊñá‰ª∂]
        DEBUG[Ë∞ÉËØï‰ø°ÊÅØ]
    end
    
    START_LOG --> LOAD_TIME
    ENTITY_LOG --> LOAD_TIME
    SEARCH_LOG --> SEARCH_TIME
    AI_LOG --> AI_TIME
    ERROR_LOG --> TOTAL_TIME
    
    LOAD_TIME --> CONSOLE
    SEARCH_TIME --> FILE
    AI_TIME --> DEBUG
    TOTAL_TIME --> FILE
    
    classDef logNode fill:#fff3cd
    classDef metricNode fill:#d1ecf1
    classDef outputNode fill:#d4edda
    
    class START_LOG,ENTITY_LOG,SEARCH_LOG,AI_LOG,ERROR_LOG logNode
    class LOAD_TIME,SEARCH_TIME,AI_TIME,TOTAL_TIME metricNode
    class CONSOLE,FILE,DEBUG outputNode
```

### üîÄ Êï∞ÊçÆÊµÅÂêëÂõæ

```mermaid
flowchart TD
    subgraph "ËæìÂÖ•Â±Ç"
        USER_INPUT[Áî®Êà∑ÈúÄÊ±ÇÊèèËø∞]
        SESSION_ID[‰ºöËØùID]
        PARAMS[Â∑•ÂÖ∑ÂèÇÊï∞]
    end
    
    subgraph "Â§ÑÁêÜÂ±Ç"
        HANDLER[HandlerÂ§ÑÁêÜÂô®]
        RAG_TOOL[RagInlineTool]
        AI_ENGINE[AIÂºïÊìé]
    end
    
    subgraph "Êï∞ÊçÆÂ±Ç"
        ENTITIES[ÂÆû‰ΩìÊï∞ÊçÆ]
        EMBEDDINGS[ÂêëÈáèÂµåÂÖ•]
        RELATIONSHIPS[ÂÖ≥Á≥ªÊï∞ÊçÆ]
    end
    
    subgraph "Áä∂ÊÄÅÂ±Ç"
        CONVERSATION[‰ºöËØùÁä∂ÊÄÅ]
        SELECTION[ÂÆû‰ΩìÈÄâÊã©]
        CONTEXT[‰∏ä‰∏ãÊñá‰ø°ÊÅØ]
    end
    
    subgraph "ËæìÂá∫Â±Ç"
        RECOMMENDATIONS[Êé®ËçêÁªìÊûú]
        CODE_PROMPT[‰ª£Á†ÅÊèêÁ§∫ËØç]
        ANALYSIS[ÂàÜÊûêÊä•Âëä]
    end
    
    USER_INPUT --> HANDLER
    SESSION_ID --> HANDLER
    PARAMS --> HANDLER
    
    HANDLER --> RAG_TOOL
    RAG_TOOL --> AI_ENGINE
    
    RAG_TOOL <--> ENTITIES
    RAG_TOOL <--> EMBEDDINGS
    RAG_TOOL <--> RELATIONSHIPS
    
    HANDLER <--> CONVERSATION
    HANDLER <--> SELECTION
    HANDLER <--> CONTEXT
    
    HANDLER --> RECOMMENDATIONS
    HANDLER --> CODE_PROMPT
    HANDLER --> ANALYSIS
    
    classDef inputLayer fill:#e3f2fd
    classDef processLayer fill:#f3e5f5
    classDef dataLayer fill:#e8f5e8
    classDef stateLayer fill:#fff3e0
    classDef outputLayer fill:#fce4ec
    
    class USER_INPUT,SESSION_ID,PARAMS inputLayer
    class HANDLER,RAG_TOOL,AI_ENGINE processLayer
    class ENTITIES,EMBEDDINGS,RELATIONSHIPS dataLayer
    class CONVERSATION,SELECTION,CONTEXT stateLayer
    class RECOMMENDATIONS,CODE_PROMPT,ANALYSIS outputLayer
```

### üè¢ ÁªÑ‰ª∂‰æùËµñÂÖ≥Á≥ªÂõæ

```mermaid
graph TD
    subgraph "MCP Layer"
        Server[MCP Server]
        Transport[Stdio Transport]
    end
    
    subgraph "Application Layer"
        Registry[Tool Registry]
        Config[Server Config]
    end
    
    subgraph "Handler Layer"
        BaseHandler[BaseHandler]
        StartHandler[StartAnalysisHandler]
        CoreHandler[CoreComponentHandler]
        ModifyHandler[ModifyEntityHandler]
        PromptHandler[GeneratePromptHandler]
        QuickHandler[QuickAnalysisHandler]
    end
    
    subgraph "Service Layer"
        ConversationSvc[ConversationService]
        EntityUtils[EntityUtils]
        PromptGen[PromptGenerator]
        SearchUtils[SearchUtils]
    end
    
    subgraph "Core Engine"
        RagTool[RagInlineTool]
        SimpleLogger[SimpleLogger]
    end
    
    subgraph "External Dependencies"
        AnthropicSDK[Anthropic SDK]
        ParserAgent[Parser Agent]
        SharedUtils[Shared Utils]
    end
    
    Server --> Transport
    Server --> Registry
    Registry --> Config
    
    Registry --> StartHandler
    Registry --> CoreHandler
    Registry --> ModifyHandler
    Registry --> PromptHandler
    Registry --> QuickHandler
    
    StartHandler --> BaseHandler
    CoreHandler --> BaseHandler
    ModifyHandler --> BaseHandler
    PromptHandler --> BaseHandler
    QuickHandler --> BaseHandler
    
    StartHandler --> ConversationSvc
    CoreHandler --> ConversationSvc
    ModifyHandler --> ConversationSvc
    PromptHandler --> ConversationSvc
    
    StartHandler --> EntityUtils
    CoreHandler --> EntityUtils
    ModifyHandler --> EntityUtils
    PromptHandler --> PromptGen
    QuickHandler --> PromptGen
    
    StartHandler --> RagTool
    CoreHandler --> RagTool
    ModifyHandler --> RagTool
    PromptHandler --> RagTool
    QuickHandler --> RagTool
    
    BaseHandler --> SimpleLogger
    RagTool --> AnthropicSDK
    RagTool --> ParserAgent
    SimpleLogger --> SharedUtils
    
    classDef mcpLayer fill:#e1f5fe,stroke:#01579b
    classDef appLayer fill:#f3e5f5,stroke:#4a148c
    classDef handlerLayer fill:#e8f5e8,stroke:#1b5e20
    classDef serviceLayer fill:#fff3e0,stroke:#e65100
    classDef coreLayer fill:#fce4ec,stroke:#880e4f
    classDef externalLayer fill:#f1f8e9,stroke:#33691e
    
    class Server,Transport mcpLayer
    class Registry,Config appLayer
    class BaseHandler,StartHandler,CoreHandler,ModifyHandler,PromptHandler,QuickHandler handlerLayer
    class ConversationSvc,EntityUtils,PromptGen,SearchUtils serviceLayer
    class RagTool,SimpleLogger coreLayer
    class AnthropicSDK,ParserAgent,SharedUtils externalLayer
```

### üîß Â∑•ÂÖ∑Ë∞ÉÁî®ÂÖ≥Á≥ªÂõæ

```mermaid
graph LR
    subgraph "Áî®Êà∑Â∑•‰ΩúÊµÅ"
        U1[ÈúÄÊ±ÇÂàÜÊûê] --> U2[ÁªÑ‰ª∂ÈÄâÊã©]
        U2 --> U3[ÂÆû‰ΩìË∞ÉÊï¥]
        U3 --> U4[‰ª£Á†ÅÁîüÊàê]
    end
    
    subgraph "Â∑•ÂÖ∑Êò†Â∞Ñ"
        T1[start-analysis] 
        T2[select-core-component]
        T3[modify-entity-selection]
        T4[generate-code-prompt]
        T5[quick-analysis]
    end
    
    subgraph "Êï∞ÊçÆÂ§ÑÁêÜ"
        D1[ËØ≠‰πâÊêúÁ¥¢]
        D2[ÂÖ≥Á≥ªÂàÜÊûê]
        D3[Êô∫ËÉΩÁ≠õÈÄâ]
        D4[‰∏ä‰∏ãÊñáÊûÑÂª∫]
    end
    
    U1 --> T1
    U2 --> T2
    U3 --> T3
    U4 --> T4
    
    T1 --> D1
    T2 --> D2
    T3 --> D2
    T4 --> D4
    T5 --> D1
    T5 --> D2
    T5 --> D3
    T5 --> D4
    
    D1 -.->|Êé®ËçêÁªÑ‰ª∂| T1
    D2 -.->|Áõ∏ÂÖ≥ÂÆû‰Ωì| T2
    D2 -.->|ÂÆû‰ΩìÂÖ≥Á≥ª| T3
    D3 -.->|AIÁ≠õÈÄâ| T2
    D4 -.->|ÂÆåÊï¥prompt| T4
    
    classDef userFlow fill:#e3f2fd
    classDef toolFlow fill:#f3e5f5
    classDef dataFlow fill:#e8f5e8
    
    class U1,U2,U3,U4 userFlow
    class T1,T2,T3,T4,T5 toolFlow
    class D1,D2,D3,D4 dataFlow
```

## üé® Â∑•‰ΩúÊ®°ÂºèËØ¶Ëß£

### Ê®°Âºè 1ÔºöÂÆåÂÖ®Ëá™Âä®ÂåñÔºàÊé®ËçêÊñ∞ÊâãÔºâ

**ÊµÅÁ®ã**ÔºöÈúÄÊ±ÇËæìÂÖ• ‚Üí Ëá™Âä®ÂàÜÊûê ‚Üí Êô∫ËÉΩÂÖ≥ËÅî ‚Üí ÁîüÊàê‰ª£Á†Å

```bash
# Ê≠•È™§1ÔºöÂø´ÈÄüÂàÜÊûê
quick-analysis
input: "ÂÆûÁé∞Áî®Êà∑ÁôªÂΩïÂäüËÉΩ"
includeRelated: true
maxRelated: 2
```

**ÁâπÁÇπ**Ôºö
- ‚úÖ Èõ∂Â≠¶‰π†ÊàêÊú¨
- ‚úÖ ÊûÅÈÄüÂá∫Á†Å
- ‚ùå Á≤æÁ°ÆÂ∫¶Áõ∏ÂØπËæÉ‰Ωé

### Ê®°Âºè 2ÔºöÊô∫ËÉΩÂÖ≥ËÅîÔºàÊé®ËçêÂ§ßÂ§öÊï∞Âú∫ÊôØÔºâ

**ÊµÅÁ®ã**ÔºöÈúÄÊ±ÇÂàÜÊûê ‚Üí ÈÄâÊã©Ê†∏ÂøÉÁªÑ‰ª∂ ‚Üí AIÊô∫ËÉΩÂÖ≥ËÅî ‚Üí ÁîüÊàê‰ª£Á†Å

```bash
# Ê≠•È™§1ÔºöÂàÜÊûêÈúÄÊ±Ç
start-analysis
input: "ÂÆûÁé∞Áî®Êà∑ÁôªÂΩïÂäüËÉΩ"

# Ê≠•È™§2ÔºöÈÄâÊã©Ê†∏ÂøÉÁªÑ‰ª∂Âπ∂Êô∫ËÉΩÂÖ≥ËÅî
select-core-component  
sessionId: "1703123456789"
maxRelated: 2

# Ê≠•È™§3ÔºöÁîüÊàê‰ª£Á†Å
generate-code-prompt
sessionId: "1703123456789"
```

**ÁâπÁÇπ**Ôºö
- ‚úÖ Âπ≥Ë°°ÊïàÁéáÂíåÁ≤æÁ°ÆÂ∫¶
- ‚úÖ AIÊô∫ËÉΩÁ≠õÈÄâÁõ∏ÂÖ≥ÂÆû‰Ωì
- ‚úÖ ÈÄÇÂêàÂ§ßÂ§öÊï∞ÂºÄÂèëÂú∫ÊôØ

### Ê®°Âºè 3ÔºöÁ≤æÁ°ÆÊâãÂä®ÔºàÊé®Ëçê‰∏ìÂÆ∂Áî®Êà∑Ôºâ

**ÊµÅÁ®ã**ÔºöÈúÄÊ±ÇÂàÜÊûê ‚Üí ÊâãÂä®ÈÄâÊã©ÂÆû‰Ωì ‚Üí Á≤æÁ°ÆË∞ÉÊï¥ ‚Üí ÁîüÊàê‰ª£Á†Å

```bash
# Ê≠•È™§1ÔºöÂàÜÊûêÈúÄÊ±Ç
start-analysis
input: "ÂÆûÁé∞Áî®Êà∑ÁôªÂΩïÂäüËÉΩ"

# Ê≠•È™§2ÔºöÂàùÂßãÂåñÊâãÂä®ÈÄâÊã©
modify-entity-selection
sessionId: "1703123456789"
action: "replace"
entityIds: "Component:LoginForm"
maxRelated: 5

# Ê≠•È™§3ÔºöÁ≤æÁ°ÆÊ∑ªÂä†ÈúÄË¶ÅÁöÑÂÆû‰Ωì
modify-entity-selection
sessionId: "1703123456789"
action: "add"
entityIds: "API:AuthService,Hook:useAuth"

# Ê≠•È™§4ÔºöÁßªÈô§‰∏çÈúÄË¶ÅÁöÑÂÆû‰Ωì
modify-entity-selection
sessionId: "1703123456789"
action: "remove"
entityIds: "Util:DebugLogger"

# Ê≠•È™§5ÔºöÁîüÊàê‰ª£Á†Å
generate-code-prompt
sessionId: "1703123456789"
```

**ÁâπÁÇπ**Ôºö
- ‚úÖ ÊúÄÈ´òÁ≤æÁ°ÆÂ∫¶
- ‚úÖ ÂÆåÂÖ®Áî®Êà∑ÊéßÂà∂
- ‚ùå ÈúÄË¶Å‰∏ÄÂÆöÂ≠¶‰π†ÊàêÊú¨

### Ê®°Âºè 4ÔºöÁõ¥Êé•Âá∫Á†ÅÔºàÊé®ËçêÂø´ÈÄüÂºÄÂèëÔºâ

**ÊµÅÁ®ã**ÔºöÈúÄÊ±ÇÂàÜÊûê ‚Üí Áõ¥Êé•ÈÄâÊã©Ê†∏ÂøÉÁªÑ‰ª∂ÁîüÊàê‰ª£Á†Å

```bash
# Ê≠•È™§1ÔºöÂàÜÊûêÈúÄÊ±Ç
start-analysis
input: "ÂÆûÁé∞Áî®Êà∑ÁôªÂΩïÂäüËÉΩ"

# Ê≠•È™§2ÔºöÁõ¥Êé•Âü∫‰∫éÊ†∏ÂøÉÁªÑ‰ª∂ÁîüÊàê‰ª£Á†Å
generate-code-prompt
sessionId: "1703123456789"
componentId: "Component:LoginForm"
additionalContext: "Âè™ÈúÄË¶ÅÂü∫Á°ÄÁôªÂΩïÂäüËÉΩ"
```

**ÁâπÁÇπ**Ôºö
- ‚úÖ ÈÄüÂ∫¶ÊúÄÂø´
- ‚úÖ ÈÄÇÂêàÁÆÄÂçïÈúÄÊ±Ç
- ‚ùå ‰∏ä‰∏ãÊñá‰ø°ÊÅØËæÉÂ∞ë

## üìã ÂÆûÊàò‰ΩøÁî®Ê°à‰æã

### Ê°à‰æã 1ÔºöÂÆûÁé∞Ë¥≠Áâ©ËΩ¶ÂäüËÉΩ

**ÈúÄÊ±Ç**ÔºöÂÆûÁé∞ÂïÜÂìÅÊ∑ªÂä†Âà∞Ë¥≠Áâ©ËΩ¶„ÄÅÊï∞Èáè‰øÆÊîπ„ÄÅÂà†Èô§Á≠âÂäüËÉΩ

**Êé®ËçêÊ®°Âºè**ÔºöÊô∫ËÉΩÂÖ≥ËÅîÊ®°Âºè

```bash
# Ê≠•È™§1ÔºöÂàÜÊûêÈúÄÊ±Ç
start-analysis
input: "ÂÆûÁé∞Ë¥≠Áâ©ËΩ¶ÂäüËÉΩÔºåÂåÖÊã¨Ê∑ªÂä†ÂïÜÂìÅ„ÄÅ‰øÆÊîπÊï∞Èáè„ÄÅÂà†Èô§ÂïÜÂìÅ„ÄÅËÆ°ÁÆóÊÄª‰ª∑"

# Ê≠•È™§2ÔºöÈÄâÊã©Êé®ËçêÁöÑË¥≠Áâ©ËΩ¶ÁªÑ‰ª∂Âπ∂Êô∫ËÉΩÂÖ≥ËÅî
select-core-component
sessionId: "ÁîüÊàêÁöÑ‰ºöËØùID"
maxRelated: 3

# Ê≠•È™§3ÔºöÁîüÊàê‰ª£Á†Å
generate-code-prompt  
sessionId: "ÁîüÊàêÁöÑ‰ºöËØùID"
additionalContext: "ÈúÄË¶ÅÊîØÊåÅÂïÜÂìÅËßÑÊ†ºÈÄâÊã©ÂíåÂ∫ìÂ≠òÊ£ÄÊü•"
```

### Ê°à‰æã 2Ôºö‰ºòÂåñÂàóË°®È°µÈù¢ÊÄßËÉΩ

**ÈúÄÊ±Ç**Ôºö‰ºòÂåñÂïÜÂìÅÂàóË°®È°µÈù¢ÁöÑÂä†ËΩΩÊÄßËÉΩÂíåÁî®Êà∑‰ΩìÈ™å

**Êé®ËçêÊ®°Âºè**ÔºöÁ≤æÁ°ÆÊâãÂä®Ê®°Âºè

```bash
# Ê≠•È™§1ÔºöÂàÜÊûêÈúÄÊ±Ç
start-analysis
input: "‰ºòÂåñÂïÜÂìÅÂàóË°®È°µÈù¢ÊÄßËÉΩÔºåÂÆûÁé∞ËôöÊãüÊªöÂä®„ÄÅÊáíÂä†ËΩΩ„ÄÅÁºìÂ≠ò‰ºòÂåñ"

# Ê≠•È™§2ÔºöÊâãÂä®ÈÄâÊã©Áõ∏ÂÖ≥ÁªÑ‰ª∂
modify-entity-selection
sessionId: "ÁîüÊàêÁöÑ‰ºöËØùID"
action: "replace"
entityIds: "Component:ProductList"
maxRelated: 5

# Ê≠•È™§3ÔºöÊ∑ªÂä†ÊÄßËÉΩÁõ∏ÂÖ≥ÁöÑÂ∑•ÂÖ∑
modify-entity-selection
sessionId: "ÁîüÊàêÁöÑ‰ºöËØùID" 
action: "add"
entityIds: "Hook:useVirtualScroll,Hook:useLazyLoad,Util:CacheManager"

# Ê≠•È™§4ÔºöÁîüÊàê‰ºòÂåñÊñπÊ°à
generate-code-prompt
sessionId: "ÁîüÊàêÁöÑ‰ºöËØùID"
additionalContext: "ÈáçÁÇπÂÖ≥Ê≥®È¶ñÂ±èÂä†ËΩΩÊó∂Èó¥ÂíåÊªöÂä®ÊµÅÁïÖÂ∫¶"
```

### Ê°à‰æã 3Ôºö‰øÆÂ§ç Bug

**ÈúÄÊ±Ç**Ôºö‰øÆÂ§çËÆ¢ÂçïÊèê‰∫§Êó∂ÁöÑÊï∞ÈáèËÆ°ÁÆóÈîôËØØ

**Êé®ËçêÊ®°Âºè**ÔºöÁõ¥Êé•Âá∫Á†ÅÊ®°Âºè

```bash
# Ê≠•È™§1ÔºöÂàÜÊûêÈóÆÈ¢ò
start-analysis
input: "‰øÆÂ§çËÆ¢ÂçïÊèê‰∫§Êó∂ÂïÜÂìÅÊï∞ÈáèËÆ°ÁÆóÈîôËØØÁöÑbugÔºåÊï∞Èáè*Âçï‰ª∑ËÆ°ÁÆó‰∏çÊ≠£Á°Æ"

# Ê≠•È™§2ÔºöÁõ¥Êé•Âü∫‰∫éËÆ¢ÂçïÁªÑ‰ª∂ÁîüÊàê‰øÆÂ§çÊñπÊ°à
generate-code-prompt
sessionId: "ÁîüÊàêÁöÑ‰ºöËØùID"
componentId: "Component:OrderForm"
additionalContext: "ÈáçÁÇπÊ£ÄÊü•Êï∞ÈáèËÆ°ÁÆóÈÄªËæëÔºåÁ°Æ‰øùÁ≤æÂ∫¶Ê≠£Á°Æ"
```

## üîç È´òÁ∫ß‰ΩøÁî®ÊäÄÂ∑ß

### ÊäÄÂ∑ß 1Ôºö‰ºòÂåñÈúÄÊ±ÇÊèèËø∞

**‚ùå Ê®°Á≥äÊèèËø∞**Ôºö
```
input: "ÂÅö‰∏™ÁôªÂΩï"
```

**‚úÖ ËØ¶ÁªÜÊèèËø∞**Ôºö
```
input: "ÂÆûÁé∞Áî®Êà∑ÁôªÂΩïÂäüËÉΩÔºåÂåÖÊã¨Ë¥¶Âè∑ÂØÜÁ†ÅÈ™åËØÅ„ÄÅËÆ∞‰ΩèÁôªÂΩïÁä∂ÊÄÅ„ÄÅÁôªÂΩïÂ§±Ë¥•ÊèêÁ§∫„ÄÅÊîØÊåÅÊâãÊú∫Âè∑ÂíåÈÇÆÁÆ±ÁôªÂΩï„ÄÅÈõÜÊàêÁ¨¨‰∏âÊñπÁôªÂΩï"
```

**ÊèêÂçáÂàÜÊûêÁ≤æÂ∫¶ÁöÑË¶ÅÁÇπ**Ôºö
- ÊèèËø∞ÂÖ∑‰ΩìÂäüËÉΩÁÇπ
- ÊèêÂèäÊäÄÊúØË¶ÅÊ±Ç
- ËØ¥Êòé‰∏öÂä°Âú∫ÊôØ
- ÊåáÂá∫ÁâπÊÆäÈúÄÊ±Ç

### ÊäÄÂ∑ß 2ÔºöÂêàÁêÜ‰ΩøÁî® maxRelated ÂèÇÊï∞

**‰∏çÂêåÂú∫ÊôØÁöÑÊé®ËçêÂÄº**Ôºö
- **ÁÆÄÂçïÂäüËÉΩ**Ôºö`maxRelated: 1-2`
- **‰∏≠Á≠âÂ§çÊùÇÂ∫¶**Ôºö`maxRelated: 3-5`  
- **Â§çÊùÇÂäüËÉΩ**Ôºö`maxRelated: 5-10`
- **Êû∂ÊûÑÂàÜÊûê**Ôºö`maxRelated: 10+`

### ÊäÄÂ∑ß 3ÔºöÊúâÊïàÂà©Áî® additionalContext

**ÊäÄÊúØË¶ÅÊ±Ç**Ôºö
```
additionalContext: "‰ΩøÁî® Vue3 Composition API + TypeScript + Pinia"
```

**ÊÄßËÉΩË¶ÅÊ±Ç**Ôºö
```
additionalContext: "ÈáçÁÇπ‰ºòÂåñÈ¶ñÂ±èÂä†ËΩΩÊó∂Èó¥ÔºåÊîØÊåÅSSR"
```

**ÂÖºÂÆπÊÄßË¶ÅÊ±Ç**Ôºö
```
additionalContext: "ÈúÄË¶ÅÂÖºÂÆπ iOS Safari ÂíåÂæÆ‰ø°Â∞èÁ®ãÂ∫è"
```

**‰ª£Á†ÅËßÑËåÉ**Ôºö
```
additionalContext: "ÈÅµÂæ™Âõ¢ÈòüESLintËßÑËåÉÔºå‰ΩøÁî®ÂáΩÊï∞ÂºèÁºñÁ®ãÈ£éÊ†º"
```

### ÊäÄÂ∑ß 4Ôºö‰ºöËØùÁÆ°ÁêÜÊúÄ‰Ω≥ÂÆûË∑µ

**ÈïøÊúüÈ°πÁõÆÂºÄÂèë**Ôºö
- ‰ΩøÁî®ÊúâÊÑè‰πâÁöÑ sessionIdÔºö`"login-feature-20241201"`
- ‰∏∫‰∏çÂêåÂäüËÉΩ‰ΩøÁî®‰∏çÂêå‰ºöËØù
- ÂÆöÊúüÊ∏ÖÁêÜËøáÊúü‰ºöËØù

**Âõ¢ÈòüÂçè‰Ωú**Ôºö
- Âú® sessionId ‰∏≠ÂåÖÂê´ÂºÄÂèëËÄÖ‰ø°ÊÅØ
- ÂÖ±‰∫´ÈáçË¶ÅÁöÑÂàÜÊûêÁªìÊûú
- Âª∫Á´ã‰ºöËØùÂëΩÂêçËßÑËåÉ

## ‚ö†Ô∏è Â∏∏ËßÅÈóÆÈ¢ò‰∏éËß£ÂÜ≥ÊñπÊ°à

### ÈóÆÈ¢ò 1ÔºöÊú™ÊâæÂà∞ÂÆû‰ΩìÊñá‰ª∂

**ÈîôËØØ‰ø°ÊÅØ**Ôºö
```
‚ùå ÈîôËØØ: Êú™ÊâæÂà∞ÂÆû‰ΩìÊñá‰ª∂ /path/to/entities.enriched.json
```

**Ëß£ÂÜ≥ÊñπÊ°à**Ôºö
```bash
# 1. Á°Æ‰øùÂú®È°πÁõÆÊ†πÁõÆÂΩïËøêË°å
cd /path/to/your/project

# 2. ÁîüÊàêÂÆû‰ΩìÊñá‰ª∂
pnpm run parser-agent extract --path=./src --out=entities.json
pnpm run enrichment-agent --input=entities.json --output=entities.enriched.json

# 3. È™åËØÅÊñá‰ª∂Â≠òÂú®
ls -la entities.enriched.json
```

### ÈóÆÈ¢ò 2ÔºöÁõ∏ÂÖ≥Â∫¶ÂàÜÊï∞Ëøá‰Ωé

**Áé∞Ë±°**ÔºöÊâÄÊúâÊé®ËçêÁªÑ‰ª∂ÁöÑÁõ∏ÂÖ≥Â∫¶ÈÉΩÂ∞è‰∫é 5.0

**ÂèØËÉΩÂéüÂõ†**Ôºö
- ÈúÄÊ±ÇÊèèËø∞Ëøá‰∫éÁÆÄÂçï
- ÂÆû‰ΩìÊï∞ÊçÆ‰∏çÂÆåÊï¥
- ÊäÄÊúØÊ†à‰∏çÂåπÈÖç

**Ëß£ÂÜ≥ÊñπÊ°à**Ôºö
1. **‰ºòÂåñÈúÄÊ±ÇÊèèËø∞**ÔºöÂ¢ûÂä†Êõ¥Â§öÊäÄÊúØÂíå‰∏öÂä°ÁªÜËäÇ
2. **ÈáçÊñ∞ÁîüÊàêÂÆû‰ΩìÊï∞ÊçÆ**ÔºöÁ°Æ‰øù‰ª£Á†ÅÂ∫ìÂÆåÊï¥Êâ´Êèè
3. **‰ΩøÁî®ÂÖ≥ÈîÆËØçÂåπÈÖç**ÔºöÂú®ÈúÄÊ±Ç‰∏≠ÂåÖÂê´È°πÁõÆÁâπÂÆöÁöÑÊúØËØ≠

### ÈóÆÈ¢ò 3Ôºö‰ºöËØùÁä∂ÊÄÅ‰∏¢Â§±

**Áé∞Ë±°**ÔºöÊó†Ê≥ïÊâæÂà∞ÊåáÂÆöÁöÑ‰ºöËØùID

**Ëß£ÂÜ≥ÊñπÊ°à**Ôºö
- Ê£ÄÊü• sessionId ÊòØÂê¶Ê≠£Á°Æ
- ÈáçÊñ∞ËøêË°å start-analysis ÂàùÂßãÂåñ‰ºöËØù
- ‰ΩøÁî® quick-analysis Ë∑≥Ëøá‰ºöËØùÁÆ°ÁêÜ

### ÈóÆÈ¢ò 4ÔºöÁîüÊàêÁöÑ‰ª£Á†Å‰∏ä‰∏ãÊñáËøáÂ§ö

**Áé∞Ë±°**ÔºöÁîüÊàêÁöÑ prompt ËøáÈïøÔºåÂΩ±Âìç AI ÁêÜËß£

**Ëß£ÂÜ≥ÊñπÊ°à**Ôºö
- ÂáèÂ∞ë maxRelated ÂèÇÊï∞ÂÄº
- ‰ΩøÁî®ÊâãÂä®ÈÄâÊã©Ê®°ÂºèÁ≤æÁ°ÆÊéßÂà∂ÂÆû‰Ωì
- Âú® additionalContext ‰∏≠ÊòéÁ°ÆÊåáÂá∫ÈáçÁÇπÂÖ≥Ê≥®ÁöÑÊñπÈù¢

## üìä ÊÄßËÉΩ‰ºòÂåñÂª∫ËÆÆ

### ÂÆû‰ΩìÊï∞ÊçÆ‰ºòÂåñ

**ÂÆöÊúüÊõ¥Êñ∞ÂÆû‰ΩìÊï∞ÊçÆ**Ôºö
```bash
# ÊØèÂë®Êõ¥Êñ∞‰∏ÄÊ¨°ÂÆû‰ΩìÊï∞ÊçÆ
pnpm run parser-agent extract --path=./src --out=entities.json
pnpm run enrichment-agent --input=entities.json --output=entities.enriched.json
```

**‰ºòÂåñÊâ´ÊèèËåÉÂõ¥**Ôºö
```bash
# Âè™Êâ´ÊèèÊ†∏ÂøÉÊ∫ê‰ª£Á†ÅÁõÆÂΩïÔºåÊéíÈô§ÊµãËØïÂíåÊûÑÂª∫Êñá‰ª∂
pnpm run parser-agent extract --path=./src --exclude="**/*.test.*,**/dist/**" --out=entities.json
```

### Êü•ËØ¢ÊÄßËÉΩ‰ºòÂåñ

**‰ΩøÁî®ÁºìÂ≠ò**Ôºö
- ÂØπÁõ∏ÂêåÈúÄÊ±Ç‰ΩøÁî®Áõ∏ÂêåÁöÑ sessionId
- Â§çÁî®Â∑≤ÂàÜÊûêÁöÑÁªìÊûú

**ÂàÜÊâπÂ§ÑÁêÜ**Ôºö
- Â§çÊùÇÈúÄÊ±ÇÂàÜËß£‰∏∫Â§ö‰∏™Â∞èÈúÄÊ±Ç
- ÈÄêÊ≠•ÊûÑÂª∫ÂÆåÊï¥Ëß£ÂÜ≥ÊñπÊ°à

## üéØ ÊÄªÁªì

XHS Code Research MCP Êèê‰æõ‰∫Ü‰ªéÂÆåÂÖ®Ëá™Âä®ÂåñÂà∞Á≤æÁ°ÆÊâãÂä®ÊéßÂà∂ÁöÑÂ§öÁßçÂ∑•‰ΩúÊ®°ÂºèÔºåËÉΩÂ§üÊª°Ë∂≥‰∏çÂêåÂºÄÂèëÂú∫ÊôØÁöÑÈúÄÊ±ÇÔºö

- **Êñ∞ÊâãÂºÄÂèëËÄÖ**Ôºö‰ΩøÁî® `quick-analysis` Âø´ÈÄü‰∏äÊâã
- **Êó•Â∏∏ÂºÄÂèë**Ôºö‰ΩøÁî® `start-analysis` + `select-core-component` Ëé∑ÂæóÂπ≥Ë°°ÁöÑÊïàÁéáÂíåÁ≤æÂ∫¶
- **Â§çÊùÇÈ°πÁõÆ**Ôºö‰ΩøÁî®ÊâãÂä®ÈÄâÊã©Ê®°ÂºèËøõË°åÁ≤æÁ°ÆÊéßÂà∂
- **Âø´ÈÄüÂºÄÂèë**Ôºö‰ΩøÁî®Áõ¥Êé•Âá∫Á†ÅÊ®°ÂºèÊèêÂçáÊïàÁéá

ÈÄöËøáÂêàÁêÜÈÄâÊã©Â∑•‰ΩúÊ®°ÂºèÂíå‰ºòÂåñ‰ΩøÁî®ÊäÄÂ∑ßÔºåÂèØ‰ª•ÊòæËëóÊèêÂçá‰ª£Á†ÅÁîüÊàêÁöÑË¥®ÈáèÂíåÂºÄÂèëÊïàÁéá„ÄÇ

---

üìù **ÊñáÊ°£ÁâàÊú¨**: v1.0  
üîÑ **ÊúÄÂêéÊõ¥Êñ∞**: 2024Âπ¥12Êúà  
üè∑Ô∏è **ÈÄÇÁî®ÁâàÊú¨**: @xhs/code-research-mcp v1.0.5+ 