# ğŸ¤– å¤šè½®å¯¹è¯æµ‹è¯•

## å¿«é€Ÿå¼€å§‹

### æ–¹å¼ 1: ä¸€é”®å¯åŠ¨ï¼ˆæ¨èï¼‰

```bash
./scripts/test-agent-chat.sh
```

è¿™ä¼šè‡ªåŠ¨ï¼š
1. âœ… æ£€æŸ¥å¹¶ç¼–è¯‘ Bridge
2. âœ… æ£€æŸ¥å¹¶å¯åŠ¨ claude-code-router
3. âœ… å¯åŠ¨å¤šè½®å¯¹è¯ç¨‹åº

### æ–¹å¼ 2: æ‰‹åŠ¨å¯åŠ¨

```bash
# 1. ç¡®ä¿ Router åœ¨è¿è¡Œ
ccr start

# 2. è¿è¡Œå¯¹è¯ç¨‹åº
cargo run --example simple_chat_test
```

## ä½¿ç”¨è¯´æ˜

### å¯åŠ¨å

ç¨‹åºä¼šå…ˆæµ‹è¯•è¿æ¥ï¼š
```
ğŸ” æµ‹è¯•è¿æ¥...
âœ… è¿æ¥æˆåŠŸ!
   æ¨¡å‹: claude-sonnet-4-5-20250929
   SDK: 0.1.5

ğŸ¤– AI: æ”¶åˆ°

============================================================

å¼€å§‹å¯¹è¯ (è¾“å…¥ 'exit' é€€å‡º):

ä½  > 
```

### å¯¹è¯å‘½ä»¤

- **æ™®é€šå¯¹è¯**: ç›´æ¥è¾“å…¥ä½ çš„é—®é¢˜
- **æŸ¥çœ‹ä¿¡æ¯**: è¾“å…¥ `info`
- **é€€å‡º**: è¾“å…¥ `exit` æˆ– `quit`

### ç¤ºä¾‹å¯¹è¯

```
ä½  > ä½ å¥½ï¼Œä½ æ˜¯è°ï¼Ÿ

ğŸ¤– AI > æˆ‘æ˜¯ Claudeï¼Œä¸€ä¸ªç”± Anthropic å¼€å‘çš„ AI åŠ©æ‰‹ã€‚

   [Token: 145, è½®æ•°: 1]

ä½  > ä½ èƒ½åšä»€ä¹ˆï¼Ÿ

ğŸ¤– AI > æˆ‘å¯ä»¥å¸®åŠ©ä½ å›ç­”é—®é¢˜ã€ç¼–å†™ä»£ç ã€åˆ†ææ–‡æœ¬ç­‰ã€‚

   [Token: 178, è½®æ•°: 2]

ä½  > info

ğŸ“Š è¿æ¥ä¿¡æ¯:
   å·¥ä½œç›®å½•: /tmp/test-workspace
   å·²å¯¹è¯è½®æ•°: 2
   Router: http://localhost:3456
   DeerAPI: https://api.deerapi.com

ä½  > exit

ğŸ‘‹ å†è§ï¼
```

## éªŒè¯ä»£ç†æ˜¯å¦å·¥ä½œ

### 1. æ£€æŸ¥æ¨¡å‹åç§°

å¦‚æœçœ‹åˆ° `claude-sonnet-4-5-20250929`ï¼Œè¯´æ˜ä½¿ç”¨äº† DeerAPIï¼ˆé€šè¿‡ Router ä»£ç†ï¼‰ã€‚

### 2. æŸ¥çœ‹ Router æ—¥å¿—

åœ¨å¦ä¸€ä¸ªç»ˆç«¯è¿è¡Œï¼š
```bash
# å¦‚æœ Router æ˜¯ç”¨ ccr start å¯åŠ¨çš„
ccr stop
ccr start
# è§‚å¯Ÿæ—¥å¿—è¾“å‡º
```

### 3. æµ‹è¯• Router ç›´è¿

```bash
./scripts/verify-router-proxy.sh
```

## æ•…éšœæ’æŸ¥

### é—®é¢˜ 1: "Bridge æ‰§è¡Œå¤±è´¥"

**è§£å†³**:
```bash
cd scripts
pnpm install
pnpm run build:mcp
```

### é—®é¢˜ 2: "Router æœªè¿è¡Œ"

**è§£å†³**:
```bash
# æ£€æŸ¥å®‰è£…
ccr --version

# å¯åŠ¨ Router
ccr start

# æµ‹è¯•æ˜¯å¦è¿è¡Œ
curl http://localhost:3456/health
```

### é—®é¢˜ 3: "è¿æ¥å¤±è´¥"

**æ£€æŸ¥æ¸…å•**:
1. âœ… Router æ˜¯å¦åœ¨è¿è¡Œï¼Ÿ `ccr start`
2. âœ… Bridge æ˜¯å¦å·²ç¼–è¯‘ï¼Ÿ `ls scripts/dist/mcp-agent-bridge.js`
3. âœ… é…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®ï¼Ÿ `cat ~/.claude-code-router/config.json`

## æŠ€æœ¯ç»†èŠ‚

### è¯·æ±‚é“¾è·¯

```
ä½ çš„è¾“å…¥
  â†“
Rust ç¨‹åº (simple_chat_test.rs)
  â†“ JSON via stdin
Node.js Bridge (mcp-agent-bridge.js)
  â†“ query({ prompt })
@anthropic-ai/claude-agent-sdk
  â†“ HTTP POST (å¸¦ ANTHROPIC_API_KEY)
claude-code-router (http://localhost:3456)
  â†“ æ ¹æ®é…ç½®è½¬å‘
DeerAPI (https://api.deerapi.com)
  â†“ è¿”å›å“åº”
åå‘è¿”å›ç»™ä½ 
```

### éªŒè¯ç‚¹

1. **æ¨¡å‹åç§°**: `claude-sonnet-4-5-20250929` = DeerAPI âœ…
2. **Token ç»Ÿè®¡**: æœ‰æ•°å­— = è¯·æ±‚æˆåŠŸ âœ…
3. **AI å›å¤**: æœ‰å†…å®¹ = é“¾è·¯æ­£å¸¸ âœ…

## ä¸‹ä¸€æ­¥

æµ‹è¯•é€šè¿‡åï¼Œä½ å¯ä»¥ï¼š

1. **è¿è¡Œå®Œæ•´ç¤ºä¾‹**: `./scripts/run-mcp-agent.sh`
2. **æµ‹è¯• MCP å·¥å…·**: ä½¿ç”¨ä»£ç åˆ†æåŠŸèƒ½
3. **è‡ªå®šä¹‰é…ç½®**: ä¿®æ”¹ `router-config.json`

---

**æç¤º**: æ¯æ¬¡å¯¹è¯éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œä¸ä¼šä¿ç•™ä¸Šä¸‹æ–‡ã€‚å¦‚æœéœ€è¦ä¸Šä¸‹æ–‡ï¼Œéœ€è¦åœ¨ SDK é…ç½®ä¸­å¯ç”¨ä¼šè¯ç®¡ç†ã€‚
